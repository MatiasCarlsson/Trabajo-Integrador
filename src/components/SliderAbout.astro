---
const {
  imagenes = [],
  descripcion = [],
  nombre = '',
  autoplay = false,
  autoplaySpeed = 3000,
  sliderID = 'sliderAbout',
} = Astro.props;

import '@styles/ArrowSliderAbout.css';
---

<section class="flex h-4/5 flex-row justify-center gap-10">
  <article
    id={sliderID}
    class="relative mr-20 flex h-3/4 w-1/3 items-center justify-center rounded-sm bg-gray-100"
  >
    <!-- Contenedor de botones: absolute para que no afecte el layout -->
    <div class="absolute inset-0 z-20 flex items-center justify-between">
      <button id="prev" class="arrowPrev"></button>
      <button id="next" class="arrowNext"></button>
    </div>

    <img
      src=""
      alt=""
      id="sliderImage"
      class="h-[95%] w-[95%] rounded-md object-cover"
    />
  </article>
  <article
    class="h-1/2 w-1/3 items-center justify-center rounded bg-gray-100 px-1 text-center"
  >
    <h2 class="mt-2 border-b-2 border-bloom-accent pb-1 text-lg font-bold">
      Bienvenidos a Bloom
    </h2>
    <p class="mt-1 inline-block" id="aboutText"></p>
    <div class="rounded-sm border-t-2 border-bloom-accent bg-white pt-2">
      <p>posibles fotos en el futuro</p>
    </div>
  </article>
</section>

<script
  define:vars={{
    imagenes,
    descripcion,
    nombre,
    autoplay,
    autoplaySpeed,
    sliderID,
  }}
>
  document.addEventListener('DOMContentLoaded', () => {
    // Importar la función después del DOMContentLoaded
    import('/src/scripts/components/slider.js')
      .then((module) => {
        const { initSlider } = module;
        initSlider(imagenes, sliderID, {
          texts: descripcion,
          name: nombre,
          autoplay: autoplay,
          autoplaySpeed: autoplaySpeed,
          resumeAutoplay: true,
        });
      })
      .catch((error) => {
        console.error('Error al cargar el módulo del slider:', error);
      });
  });
</script>
